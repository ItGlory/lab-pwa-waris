# WARIS Platform Environment Variables
# Copy this file to .env and update the values
#
# Quick Start:
# 1. cp .env.example .env
# 2. Get OpenRouter API key from https://openrouter.ai/keys
# 3. Update OPENROUTER_API_KEY below
# 4. Run: docker-compose up -d

# ======================
# Application
# ======================
NODE_ENV=development
DEBUG=true

# ======================
# Database - PostgreSQL 18
# ======================
POSTGRES_USER=waris
POSTGRES_PASSWORD=waris
POSTGRES_DB=waris
DATABASE_URL=postgresql+asyncpg://waris:waris@postgres:5432/waris

# ======================
# Database - MongoDB 8.2
# ======================
MONGO_INITDB_ROOT_USERNAME=waris
MONGO_INITDB_ROOT_PASSWORD=waris
MONGODB_URL=mongodb://waris:waris@mongodb:27017
MONGODB_DB_NAME=waris

# ======================
# Database - Redis 8
# ======================
REDIS_URL=redis://redis:6379

# ======================
# Vector Database - Milvus 2.6
# ======================
MILVUS_HOST=milvus
MILVUS_PORT=19530

# ======================
# LLM Configuration
# ======================
# Provider: openrouter (default) | ollama | auto
# - openrouter: Use OpenRouter API only (requires API key)
# - ollama: Use local Ollama only (requires Ollama running)
# - auto: Try OpenRouter first, fallback to Ollama
LLM_PROVIDER=openrouter

# OpenRouter Configuration (Default - Cloud LLM)
# Get your API key from: https://openrouter.ai/keys
# Available Thai 70B+ models:
# - scb10x/llama3.1-typhoon2-70b-instruct (Best Thai, $0.88/M tokens)
# - qwen/qwen-2.5-72b-instruct (Good Thai, $0.35/M tokens)
# - meta-llama/llama-3.1-70b-instruct (Fallback, $0.52/M tokens)
OPENROUTER_API_KEY=sk-or-v1-your-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_DEFAULT_MODEL=qwen/qwen-2.5-72b-instruct

# Ollama Configuration (Optional - Local LLM Fallback)
# Install Ollama: https://ollama.ai
# Pull model: ollama pull qwen2.5:7b
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_DEFAULT_MODEL=qwen2.5:7b

# General LLM Settings
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.7
LLM_TIMEOUT=60

# ======================
# DMAMA Integration
# ======================
DMAMA_API_URL=https://dmama.pwa.co.th/api
DMAMA_API_KEY=your-dmama-api-key-here

# ======================
# Security
# ======================
# Generate with: openssl rand -hex 32
SECRET_KEY=change-this-to-a-secure-random-string-minimum-32-chars
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ======================
# CORS
# ======================
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ======================
# Frontend (Next.js)
# ======================
# Internal API URL (Docker internal)
API_URL=http://waris-api:8000
# Public API URL (Browser access)
NEXT_PUBLIC_API_URL=http://localhost:8000

# ======================
# MLflow
# ======================
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=waris-water-loss

# ======================
# Feature Flags
# ======================
NEXT_PUBLIC_ENABLE_AI_CHAT=true
NEXT_PUBLIC_ENABLE_DATA_IMPORT=true
NEXT_PUBLIC_ENABLE_AI_INSIGHTS=true
